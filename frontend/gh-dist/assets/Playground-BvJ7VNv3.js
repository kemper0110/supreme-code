import{p as k,u as T,a as H,W as v,B as A,c as z,k as N,g as D,Y as G,b as E,j as s,H as b,I as B,K as F,M as J,N as f}from"./index-D2fmHSNO.js";import{I as M,b as V,c as q,d as W,e as K,P as X,f as R,i as Z,g as Y,h as Q}from"./index-DDRabWzU.js";var _={root:"m-347db0ec","root--dot":"m-fbd81e3d",label:"m-5add502a",section:"m-91fdda9b"};const U={},$=z((d,{radius:i,color:e,gradient:t,variant:n,size:a,autoContrast:r})=>{const o=d.variantColorResolver({color:e||d.primaryColor,theme:d,gradient:t,variant:n||"filled",autoContrast:r});return{root:{"--badge-height":N(a,"badge-height"),"--badge-padding-x":N(a,"badge-padding-x"),"--badge-fz":N(a,"badge-fz"),"--badge-radius":i===void 0?void 0:D(i),"--badge-bg":e||n?o.background:void 0,"--badge-color":e||n?o.color:void 0,"--badge-bd":e||n?o.border:void 0,"--badge-dot-color":n==="dot"?G(e,d):void 0}}}),S=k((d,i)=>{const e=T("Badge",U,d),{classNames:t,className:n,style:a,styles:r,unstyled:o,vars:u,radius:p,color:L,gradient:h,leftSection:l,rightSection:g,children:x,variant:c,fullWidth:C,autoContrast:j,circle:I,mod:P,...O}=e,m=H({name:"Badge",props:e,classes:_,className:n,style:a,classNames:t,styles:r,unstyled:o,vars:u,varsResolver:$});return v.createElement(A,{variant:c,mod:[{block:C,circle:I},P],...m("root",{variant:c}),ref:i,...O},l&&v.createElement("span",{...m("section"),"data-position":"left"},l),v.createElement("span",{...m("label")},x),g&&v.createElement("span",{...m("section"),"data-position":"right"},g))});S.classes=_;S.displayName="@mantine/core/Badge";const w={Javascript:'console.log("Hello, supremecode, from javascript")',Java:`class App {
  public static void main(String... args) {
    System.out.println("Hello, supremecode, from java");
  }
}
`,Cpp:`#include <iostream>

int main() {
  std::cout << "Hello, supremecode, from c++";
}`};var y=function(d,i){if(!(this instanceof y))return new y(d,i);this.INITIALIZING=-1,this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,this.url=d,i=i||{},this.headers=i.headers||{},this.payload=i.payload!==void 0?i.payload:"",this.method=i.method||this.payload&&"POST"||"GET",this.withCredentials=!!i.withCredentials,this.debug=!!i.debug,this.FIELD_SEPARATOR=":",this.listeners={},this.xhr=null,this.readyState=this.INITIALIZING,this.progress=0,this.chunk="",this.lastEventId="",this.addEventListener=function(e,t){this.listeners[e]===void 0&&(this.listeners[e]=[]),this.listeners[e].indexOf(t)===-1&&this.listeners[e].push(t)},this.removeEventListener=function(e,t){if(this.listeners[e]===void 0)return;const n=[];this.listeners[e].forEach(function(a){a!==t&&n.push(a)}),n.length===0?delete this.listeners[e]:this.listeners[e]=n},this.dispatchEvent=function(e){if(!e)return!0;this.debug&&console.debug(e),e.source=this;const t="on"+e.type;return this.hasOwnProperty(t)&&(this[t].call(this,e),e.defaultPrevented)?!1:this.listeners[e.type]?this.listeners[e.type].every(function(n){return n(e),!e.defaultPrevented}):!0},this._setReadyState=function(e){const t=new CustomEvent("readystatechange");t.readyState=e,this.readyState=e,this.dispatchEvent(t)},this._onStreamFailure=function(e){const t=new CustomEvent("error");t.data=e.currentTarget.response,this.dispatchEvent(t),this.close()},this._onStreamAbort=function(){this.dispatchEvent(new CustomEvent("abort")),this.close()},this._onStreamProgress=function(e){if(!this.xhr)return;if(this.xhr.status!==200){this._onStreamFailure(e);return}this.readyState===this.CONNECTING&&(this.dispatchEvent(new CustomEvent("open")),this._setReadyState(this.OPEN));const t=this.xhr.responseText.substring(this.progress);this.progress+=t.length;const n=(this.chunk+t).split(/(\r\n\r\n|\r\r|\n\n)/g),a=n.pop();n.forEach((function(r){r.trim().length>0&&this.dispatchEvent(this._parseEventChunk(r))}).bind(this)),this.chunk=a},this._onStreamLoaded=function(e){this._onStreamProgress(e),this.dispatchEvent(this._parseEventChunk(this.chunk)),this.chunk=""},this._parseEventChunk=function(e){if(!e||e.length===0)return null;this.debug&&console.debug(e);const t={id:null,retry:null,data:null,event:null};e.split(/\n|\r\n|\r/).forEach((function(a){const r=a.indexOf(this.FIELD_SEPARATOR);let o,u;if(r>0){const p=a[r+1]===" "?2:1;o=a.substring(0,r),u=a.substring(r+p)}else if(r<0)o=a,u="";else return;o in t&&(o==="data"&&t[o]!==null?t.data+=`
`+u:t[o]=u)}).bind(this)),t.id!==null&&(this.lastEventId=t.id);const n=new CustomEvent(t.event||"message");return n.id=t.id,n.data=t.data||"",n.lastEventId=this.lastEventId,n},this._checkStreamClosed=function(){this.xhr&&this.xhr.readyState===XMLHttpRequest.DONE&&this._setReadyState(this.CLOSED)},this.stream=function(){if(!this.xhr){this._setReadyState(this.CONNECTING),this.xhr=new XMLHttpRequest,this.xhr.addEventListener("progress",this._onStreamProgress.bind(this)),this.xhr.addEventListener("load",this._onStreamLoaded.bind(this)),this.xhr.addEventListener("readystatechange",this._checkStreamClosed.bind(this)),this.xhr.addEventListener("error",this._onStreamFailure.bind(this)),this.xhr.addEventListener("abort",this._onStreamAbort.bind(this)),this.xhr.open(this.method,this.url);for(let e in this.headers)this.xhr.setRequestHeader(e,this.headers[e]);this.lastEventId.length>0&&this.xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this.xhr.withCredentials=this.withCredentials,this.xhr.send(this.payload)}},this.close=function(){this.readyState!==this.CLOSED&&(this.xhr.abort(),this.xhr=null,this._setReadyState(this.CLOSED))},(i.start===void 0||i.start)&&this.stream()};typeof exports<"u"&&(exports.SSE=y);function se(){const[d,i]=E.useState("Javascript"),e=E.useRef(),[t,n]=E.useState([]),[a,r]=E.useState(!1),o=async()=>{var x;const h=((x=e.current)==null?void 0:x.getValue())??"";n([]),r(!0);const l=new y("/api/playground",{headers:{"Content-Type":"application/json"},payload:JSON.stringify({code:h,language:d}),method:"POST"}),g=(c,C)=>{const j=c.data;console.log(j),n(I=>[...I,{type:C,message:j}])};l.addEventListener("log",c=>g(c,"log")),l.addEventListener("error",c=>g(c,"error")),l.addEventListener("info",c=>g(c,"info")),l.addEventListener("readystatechange",c=>{c.readyState!==l.OPEN&&r(!1)})},u=h=>{h.key==="F9"&&o()},p=h=>{var l;i(h),(l=e.current)==null||l.setValue(w[h])},L=h=>{console.warn("editor initialized",h),e.current=h};return s.jsxs("div",{onKeyDown:u,className:"flex flex-col px-3 pt-2 pb-4 h-screen bg-gray-100 [body:bg-gray-100] gap-1",children:[s.jsxs(b,{justify:"space-between",align:"center",children:[s.jsx(B,{to:"/",children:s.jsx(M,{size:32})}),s.jsxs(F,{align:"center",children:[s.jsx(J,{onClick:o,children:"Выполнить"}),s.jsx(f,{children:a?s.jsx(S,{color:"blue",children:"Выполняется"}):s.jsx(S,{color:"teal",children:"Завершено"})})]}),s.jsx(V,{data:[{value:"Cpp",label:s.jsxs(b,{align:"center",gap:4,children:[s.jsx(q,{}),s.jsx(f,{size:"lg",children:"C++17 gcc:13.2.0"})]})},{value:"Java",label:s.jsxs(b,{align:"center",gap:4,children:[s.jsx(W,{}),s.jsx(f,{size:"lg",children:"Java 21 corretto"})]})},{value:"Javascript",label:s.jsxs(b,{align:"center",gap:4,children:[s.jsx(K,{}),s.jsx(f,{size:"lg",children:"node.js 20"})]})}],value:d,onChange:p})]}),s.jsxs(X,{className:"mt-1",autoSaveId:"playground-panel-group",direction:"horizontal",children:[s.jsx(R,{defaultSize:70,className:"pt-1 rounded-xl bg-white",children:s.jsx(Z,{onMount:L,height:"100%",language:d.toLowerCase(),defaultValue:w[d],loading:s.jsx(f,{children:"Редактор кода загружается"})})}),s.jsx(Y,{className:"flex items-center justify-center",children:s.jsx(Q,{className:"w-[15px] text-slate-500"})}),s.jsx(R,{className:"rounded-xl bg-white",children:s.jsx("pre",{className:"px-4 pt-4 overflow-auto h-full",children:t.map((h,l)=>s.jsx("span",{className:{log:"text-slate-800",error:"text-red-500",info:"text-blue-600"}[h.type],children:h.message},l))})})]})]})}export{se as default};
